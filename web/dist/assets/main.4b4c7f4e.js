var ut=Object.defineProperty;var dt=(s,t,e)=>t in s?ut(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var r=(s,t,e)=>(dt(s,typeof t!="symbol"?t+"":t,e),e);import{h as Q,s as ft,d as bt,u as pt,a as Y,o as yt,b as R,c as N,e as tt,t as Z,f as K,g as D,F as J,r as gt,i as M,E as mt,j as wt,k as kt,l as Et,w as St,v as Tt,m as xt,n as F,p as P,q,x as _t}from"./vendor.c56e39d3.js";const It=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}};It();class C{static blockCopy(t,e,i,n,o){for(let a=0;a<o;a++)i[n++]=t[e++]}}var et=(s=>(s[s.Begin=0]="Begin",s[s.Current=1]="Current",s[s.End=2]="End",s))(et||{});const U=class{constructor(t){r(this,"initialIndex",0);r(this,"dirtyBytes",0);r(this,"position",0);r(this,"length",0);r(this,"capacity",0);r(this,"buffer");if(t<0)throw new Error(`capacity=${t}`);this.capacity=t,this.buffer=new Uint8Array(t)}setCapacity(t){if(t!=this.capacity&&t!=this.buffer.length){let e;if(t!=0){e=new Uint8Array(t);for(let i=0;i<this.length;i++)e[i]=this.buffer[i];this.buffer=e}this.dirtyBytes=0,this.capacity=t}}getCapacity(){return this.capacity-this.initialIndex}setPosition(t){if(t<0)throw new Error(`position=${t}`);this.position=this.initialIndex+t}getPosition(){return this.position-this.initialIndex}setLength(t){if(t>this.capacity)throw new Error("length can not be greater than capacity");if(t<0||t+this.initialIndex>U.maxCapacity)throw new Error("out of range");let e=t+this.initialIndex;e>this.length?this.expand(e):e<this.length&&(this.dirtyBytes+=this.length-e),this.length=e,this.position>this.length&&(this.position=this.length)}getLength(){return this.length-this.initialIndex}expand(t){if(t>this.capacity){let e=t;e<32?e=32:e<this.capacity<<1&&(e=this.capacity<<1),this.setCapacity(e)}else if(this.dirtyBytes>0){for(let e=0;e<this.dirtyBytes;e++){let i=e+this.length;this.buffer[i]=0}this.dirtyBytes=0}}readByte(){return this.position>=this.length?-1:this.buffer[this.position++]}read(t,e,i){if(e<0||i<0)throw new Error(`offset=${e}, count=${i}`);if(this.buffer.length-e<i)throw new Error("the size of buffer is less than offset + count");return this.position>=this.length||i==0?0:(this.position>=this.length-i&&(i=this.length-this.position),C.blockCopy(this.buffer,this.position,t,e,i),this.position+=i,i)}write(t,e,i){if(e<0||i<0)throw new Error(`offset=${e}, count=${i}`);if(t.byteLength-e<i)throw new Error("the size of the buffer is less than offset + count");this.position>this.length-i&&this.expand(this.position+i),C.blockCopy(t,e,this.buffer,this.position,i),this.position+=i,this.position>=this.length&&(this.length=this.position)}seek(t,e){if(t>U.maxCapacity)throw new Error("offset is out of range");let i;switch(e){case 0:if(t<0)throw new Error("attempted to seek before start of OctetsSteam");i=this.initialIndex;break;case 1:i=this.position;break;case 2:i=this.length;break;default:throw new Error("invalid SeekOrigin")}if(i+=t,i<this.initialIndex)throw new Error("attempted to seek before start of OctetsStream");return this.position=i,this.position}tidy(){const t=this.length-this.position;C.blockCopy(this.buffer,this.position,this.buffer,0,t),this.setPosition(0),this.setLength(t)}toString(){return`dirtyBytes=${this.dirtyBytes}, position=${this.position}, length=${this.length}, capacity=${this.capacity}, buffer=${this.buffer}`}};let j=U;r(j,"maxCapacity",2147483647);class B{constructor(t,e){r(this,"type");r(this,"body");this.type=t,this.body=e}static encode(t,e){const i=e?e.length:0,n=4,o=new Uint8Array(n+i);let a=0;return o[a++]=t&255,o[a++]=i>>16&255,o[a++]=i>>8&255,o[a++]=i&255,e&&C.blockCopy(e,0,o,a,i),o}static decode(t){const e=[];for(;t.getLength()-t.getPosition()>=4;){const n=t.readByte(),o=t.readByte()<<16|t.readByte()<<8|t.readByte()>>>0;if(o<0)throw new Error(`type=${n}, length = ${o}, stream=${t.toString()}`);if(t.getLength()<o){t.seek(-4,et.Current);break}const a=new Uint8Array(o);o>0&&t.read(a,0,o);let u=new B(n,a);e.push(u)}return t.tidy(),e}}var I=(s=>(s[s.Handshake=1]="Handshake",s[s.HandshakeAck=2]="HandshakeAck",s[s.Heartbeat=3]="Heartbeat",s[s.Data=4]="Data",s[s.Kick=5]="Kick",s))(I||{});function z(s){const t=new ArrayBuffer(s.length*3),e=new Uint8Array(t);let i=0;for(let o=0;o<s.length;o++){const a=s.charCodeAt(o);let u;a<=127?u=[a]:a<=2047?u=[192|a>>6,128|a&63]:u=[224|a>>12,128|(a&4032)>>6,128|a&63];for(let b=0;b<u.length;b++)e[i]=u[b],++i}const n=new Uint8Array(i);return C.blockCopy(e,0,n,0,i),n}function O(s){const t=new Uint8Array(s),e=[];let i=0,n=0;const o=t.length;for(;i<o;)t[i]<128?(n=t[i],i+=1):t[i]<224?(n=((t[i]&63)<<6)+(t[i+1]&63),i+=2):(n=((t[i]&15)<<12)+((t[i+1]&63)<<6)+(t[i+2]&63),i+=3),e.push(n);return Ct(e)}function Ct(s){const e=[];for(let i=0;i<s.length;i+=32768)e.push(String.fromCharCode.apply(null,s.slice(i,i+32768)));return e.join("")}var _=(s=>(s[s.Request=0]="Request",s[s.Notify=1]="Notify",s[s.Response=2]="Response",s[s.Push=3]="Push",s[s.Count=4]="Count",s))(_||{});const d=class{constructor(t,e,i,n,o){r(this,"id");r(this,"type");r(this,"compressRoute");r(this,"route");r(this,"body");this.id=t,this.type=e,this.compressRoute=i,this.route=n,this.body=o}static encode(t,e,i,n,o){const a=d.hasId(e)?d.calculateMsgIdBytes(t):0;let u=d.MSG_FLAG_BYTES+a;if(d.hasRoute(e)){if(i){if(typeof n!="number")throw new Error("error flag for number route!");u+=d.MSG_ROUTE_CODE_BYTES}else if(u+=d.MSG_ROUTE_LEN_BYTES,n){if(n=z(n),n.length>255)throw new Error("route maxlength is overflow");u+=n.length}}o&&(u+=o.length);const b=new Uint8Array(u);let y=0;return y=d.encodeMsgFlag(e,i,b,y),d.hasId(e)&&(y=d.encodeMsgId(t,b,y)),d.hasRoute(e)&&(y=d.encodeMsgRoute(i,n,b,y)),o!=null&&(y=d.encodeMsgBody(o,b,y)),b}static decode(t){const e=new Uint8Array(t),i=e.length||e.byteLength;let n=0,o=0,a="";const u=e[n++],b=u&d.MSG_COMPRESS_ROUTE_MASK,y=u>>1&d.MSG_TYPE_MASK;if(d.hasId(y)){let p=e[n],S=0;do p=e[n],o=o+(p&127)*Math.pow(2,7*S),n++,S++;while(p>=128)}if(d.hasRoute(y))if(b!=0)a=(e[n++]<<8|e[n++]).toString();else{const p=e[n++];if(p>0){let S=new Uint8Array(p);C.blockCopy(e,n,S,0,p),a=O(S)}else a="";n+=p}const k=i-n,m=new Uint8Array(k);return C.blockCopy(e,n,m,0,k),new d(o,y,b,a,m)}static calculateMsgIdBytes(t){let e=0;do e+=1,t>>=7;while(t>0);return e}static encodeMsgFlag(t,e,i,n){if(!d.isValid(t))throw new Error("unknown message type: "+t);return i[n]=t<<1|(e?1:0),n+d.MSG_FLAG_BYTES}static encodeMsgId(t,e,i){do{let n=t%128;const o=Math.floor(t/128);o!==0&&(n=n+128),e[i++]=n,t=o}while(t!==0);return i}static encodeMsgRoute(t,e,i,n){if(t){if(e>d.MSG_ROUTE_CODE_MAX)throw new Error("route number is overflow");i[n++]=e>>8&255,i[n++]=e&255}else e?(i[n++]=e.length&255,C.blockCopy(e,0,i,n,e.length),n+=e.length):i[n++]=0;return n}static encodeMsgBody(t,e,i){return C.blockCopy(t,0,e,i,t.length),i+t.length}static hasId(t){return t===_.Request||t===_.Response}static hasRoute(t){return t===_.Request||t===_.Notify||t===_.Push}static isValid(t){return t>=_.Request&&t<_.Count}};let x=d;r(x,"MSG_FLAG_BYTES",1),r(x,"MSG_ROUTE_CODE_BYTES",2),r(x,"MSG_ID_MAX_BYTES",5),r(x,"MSG_ROUTE_LEN_BYTES",1),r(x,"MSG_ROUTE_CODE_MAX",65535),r(x,"MSG_COMPRESS_ROUTE_MASK",1),r(x,"MSG_TYPE_MASK",7);class Lt{constructor(){r(this,"handleHeartBeat",t=>{!this.heartbeatInterval||(this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),!this.heartbeatId&&(this.heartbeatId=setTimeout(()=>{this.heartbeatId=null;const e=B.encode(I.Heartbeat);this.send(e),this.nextHeartbeatTimeout=Date.now()+this.heartbeatTimeout,this.heartbeatTimeoutId=setTimeout(this.heartbeatTimeoutCallback,this.heartbeatTimeout)},this.heartbeatInterval)))});r(this,"handleHandshake",t=>{let e=JSON.parse(O(t));const i=501;if(e.code===i){this.emit("error","client version not fullfill");return}const n=200;if(e.code!==n){this.emit("error","handshake fail");return}this.handshakeInit(e);const o=B.encode(I.HandshakeAck);this.send(o)});r(this,"handleData",t=>{let e=t;this.decode&&(e=this.decode(e)),this.processMessage(e)});r(this,"handleKick",t=>{t=JSON.parse(O(t)),this.emit("onKick",t)});r(this,"socket",null);r(this,"buffer",new j(8));r(this,"useCrypto",!1);r(this,"encode");r(this,"decode");r(this,"requestIdGenerator",0);r(this,"reconnectUrl","");r(this,"reconnect",!1);r(this,"reconnectTimer");r(this,"reconnectAttempts",0);r(this,"reconnectionDelay",5e3);r(this,"handshakeBuffer",{sys:{type:"js-websocket",version:"0.0.1",rsa:{}},user:{}});r(this,"pushHandlers",new Map);r(this,"handlers",new Map);r(this,"routeMap",new Map);r(this,"callbacks",new Map);r(this,"abbrs",{});r(this,"dict",{});r(this,"heartbeatInterval",0);r(this,"heartbeatTimeout",0);r(this,"nextHeartbeatTimeout",0);r(this,"heartbeatTimeoutId");r(this,"heartbeatId");r(this,"handshakeCallback")}on(t,e){this.pushHandlers[t]=e}emit(t,e=""){const i=this.pushHandlers[t];i!=null&&i(e)}processPackages(t){for(let e=0;e<t.length;e++){const i=t[e],n=this.handlers[i.type];n!=null&&n(i.body)}}defaultDecode(t){const e=x.decode(t);if(!(e.id>0&&(e.route=this.routeMap[e.id],this.routeMap.delete(e.id),!e.route)))return e.body=this.decompose(e),e}decompose(t){let e=t.route;if(t.compressRoute){if(!this.abbrs[e])return{};e=t.route=this.abbrs[e]}return JSON.parse(O(t.body))}reset(){this.reconnect=!1,this.reconnectionDelay=1e3*5,this.reconnectAttempts=0,clearTimeout(this.reconnectTimer)}initData(t){if(!(!t||!t.sys)&&(this.dict=t.sys.dict,this.dict)){this.abbrs={};for(const e in this.dict)this.abbrs[this.dict[e]]=e}}handshakeInit(t){t.sys&&t.sys.heartbeat?(this.heartbeatInterval=t.sys.heartbeat*1e3,this.heartbeatTimeout=this.heartbeatInterval*2):(this.heartbeatInterval=0,this.heartbeatTimeout=0),this.initData(t),typeof this.handshakeCallback=="function"&&this.handshakeCallback(t.user)}processMessage(t){if(t.id){const e=this.callbacks[t.id];this.callbacks.delete(t.id),typeof e=="function"&&e(t.body)}else{const e=this.pushHandlers[t.route];typeof e!="undefined"?e(t.body):console.log(`cannot find handler for route=${t.route}, msg=`,t)}}heartbeatTimeoutCallback(){const t=this.nextHeartbeatTimeout-Date.now();t>100?this.heartbeatTimeoutId=setTimeout(this.heartbeatTimeoutCallback,t):(console.error("server heartbeat timeout"),this.emit("heartbeat timeout"),this.disconnect())}send(t){this.socket!=null?this.socket.send(t.buffer):console.log("socket = null")}sendMessage(t,e,i){let n=i;this.encode&&(n=this.encode(t,e,i));const o=B.encode(I.Data,n);this.send(o)}connectInner(t,e,i){console.log("connect to: "+e),t=t||{};const n=10,o=t.maxReconnectAttempts||n;this.reconnectUrl=e;const a=m=>{this.reconnect&&this.emit("reconnect"),this.reset();const L=B.encode(I.Handshake,z(JSON.stringify(this.handshakeBuffer)));this.send(L),i!=null&&i()},u=m=>{let L=new Uint8Array(m.data),p=this.buffer;p.write(L,0,L.length),p.setPosition(0),this.processPackages(B.decode(p)),this.heartbeatTimeout&&(this.nextHeartbeatTimeout=Date.now()+this.heartbeatTimeout)},b=m=>{this.emit("io-error",m),console.error("socket error: ",m)},y=m=>{this.emit("close",m),this.emit("disconnect",m),console.log("socket close: ",m),t.reconnect&&this.reconnectAttempts<o&&(this.reconnect=!0,this.reconnectAttempts++,this.reconnectTimer=setTimeout(()=>{this.connectInner(t,this.reconnectUrl,i)},this.reconnectionDelay),this.reconnectionDelay*=2)};let k=new WebSocket(e);k.binaryType="arraybuffer",k.onopen=a,k.onmessage=u,k.onerror=b,k.onclose=y,this.socket=k}connect(t,e){this.handshakeCallback=t.handshakeCallback,this.encode=t.encode||this.defaultEncode,this.decode=t.decode||this.defaultDecode,this.handshakeBuffer.user=t.user,this.handlers[I.Heartbeat]=this.handleHeartBeat,this.handlers[I.Handshake]=this.handleHandshake,this.handlers[I.Data]=this.handleData,this.handlers[I.Kick]=this.handleKick,this.connectInner(t,t.url,e)}defaultEncode(t,e,i){const n=t!=0?_.Request:_.Notify;i=z(JSON.stringify(i));let o=!1;return this.dict&&this.dict[e]&&(e=this.dict[e],o=!0),x.encode(t,n,o,e,i)}disconnect(){this.socket!=null&&(this.socket.close(),console.log("disconnect"),this.socket=null),this.heartbeatId&&(clearTimeout(this.heartbeatId),this.heartbeatId=null),this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null)}request(t,e,i){let n=++this.requestIdGenerator;this.sendMessage(n,t,e),this.callbacks[n]=i,this.routeMap[n]=t}notify(t,e){e=e||{},this.sendMessage(0,t,e)}}let G=null;function it(){return G==null&&(G=document.getElementById("mainPanel")),G}function At(s){const t=it();t&&(t.appendChild(s),V())}function V(){const s=it();if(s){const t=s.scrollHeight-s.clientHeight-1;s.scrollTop<t&&(s.scrollTop=t)}}function H(s){const t=document.createElement("div");return t.innerHTML=s,At(t),t}function v(){H("<br>")}function A(s){H("["+Q(new Date).format("HH:mm:ss.S")+"] "+s)}class Bt{constructor(){r(this,"host");r(this,"directory");r(this,"websocketPath");r(this,"autoLoginLimit");r(this,"body");if(document.title!="{{.Data}}"){let t=JSON.parse(document.title);this.host=window.location.host,this.directory=t.directory,this.autoLoginLimit=t.autoLoginLimit,this.websocketPath=t.websocketPath,document.title=t.title,this.body=t.body}else this.host="localhost:8888",this.directory="ws",this.autoLoginLimit=864e5,this.websocketPath="",this.body="<h2>fake body</h2>"}getRootUrl(){let t=`${document.location.protocol}//${this.host}/${this.directory}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t}getWebsocketUrl(){const e=document.location.protocol==="https:"?"wss:":"ws:";return this.directory!=""?`${e}//${this.host}/${this.directory}/${this.websocketPath}`:`${e}//${this.host}/${this.websocketPath}`}toString(){return`host=${this.host}, directory=${this.directory}, websocketPath=${this.websocketPath}, autoLoginLimit=${this.autoLoginLimit}, body=${this.body}`}}class Dt{constructor(t){r(this,"sendLogin");r(this,"key","autoLoginUser");this.sendLogin=t}login(t,e,i){this.doLogin(t,e),this.save(t,e,i)}tryAutoLogin(){const t=localStorage.getItem(this.key);if(t){const e=JSON.parse(t);e&&new Date().getTime()<e.expireTime&&this.doLogin(e.username,e.password)}}doLogin(t,e){const i="hey pet!",n=ft.exports.sha256.hmac(i,e),o={command:"auth "+t+" "+n};this.sendLogin(o)}save(t,e,i){const n={username:t,password:e,expireTime:new Date().getTime()+i},o=JSON.stringify(n);localStorage.setItem(this.key,o)}}const nt=bt({id:"historyStore",state:()=>pt("this.is.history.store",{currentIndex:0,list:[]},{serializer:{read:s=>{if(s){let t=JSON.parse(s);if(t)return{list:t,currentIndex:t.length}}},write:s=>JSON.stringify(s.list.slice(-100))}}),getters:{histories:s=>s.list,count:s=>s.list.length},actions:{add(s){if(s!=null&&s!=""){const t=this.list,e=t.length;e==0||t[e-1]!==s?this.currentIndex=t.push(s):this.currentIndex=t.length}},getHistory(s){return s>=0&&s<this.list.length?this.list[s]:""},move(s){if(s!=0){let t=this.currentIndex+s;if(t>=0&&t<this.list.length)return this.currentIndex=t,this.list[t]}return""}}}),$t=D("b",null,"\u5386\u53F2\u547D\u4EE4\u5217\u8868\uFF1A",-1),vt=tt(),Ht=D("br",null,null,-1),Mt={id:"history-with-index"},Rt=D("br",null,null,-1),Nt=Y({setup(s){const t=nt(),e=t.histories.map(n=>n),i=t.count;return yt(()=>{V()}),(n,o)=>(R(),N(J,null,[$t,vt,Ht,tt(" count: \xA0 "+Z(K(i))+" ",1),D("ol",Mt,[(R(!0),N(J,null,gt(K(e),a=>(R(),N("li",{key:a},Z(a),1))),128))]),Rt],64))}});function Ot(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!wt(s)}var Ut=Y({props:{tableData:{type:String}},setup(s){let t=JSON.parse(s.tableData);if(t[0]===void 0)t=[t];else for(let n=0;n<t.length;n++){let o={" ":n+1};for(const[a,u]of Object.entries(t[n]))o[a]=u;t[n]=o}function i({column:n,$index:o}){let a=" ";switch(n.order){case"ascending":a="\u2191";break;case"descending":a="\u2193";break}return M("div",null,[n.label,a])}return()=>{let n;return M("div",null,[M(kt,{data:t,tableLayout:"fixed"},Ot(n=Object.keys(t[0]).map(o=>M(mt,{prop:o,label:o,sortable:!0,renderHeader:i},null)))?n:{default:()=>[n]}),M("br",null,null)])}},mounted(){setTimeout(()=>{V()})}});const Ft=D("div",{id:"mainPanel"},null,-1),Pt={id:"inputBoxDiv"},Gt=["onKeydown"],Kt=Y({setup(s){let t=Et(""),e="",i=!1,n=new Bt;const o=nt();let a=new Lt,u=n.getRootUrl(),b=new Dt(l=>{p("console.command",l,S)});a.connect({url:n.getWebsocketUrl()},()=>{console.log("websocket connected"),H(n.body),v(),b.tryAutoLogin()});const y=new Date;a.on("disconnect",()=>{const l=Q.duration(new Date().getTime()-y.getTime(),"milliseconds").humanize();A(`<b> disconnected from server after ${l} </b>`)}),a.on("console.html",k),a.on("console.default",L),window.onload=()=>{const l=document.getElementById("inputBox");!l||(l.focus(),document.onkeydown=function(h){if(h.key==="Enter"&&document.activeElement!==l&&l)return l.focus(),!1})};function k(l){A("<b>server\u54CD\u5E94\uFF1A</b>"+l),v()}function m(l){q(Ut,{tableData:l}).mount(H(""))}function L(l){const h=JSON.stringify(l);A("<b>server\u54CD\u5E94\uFF1A</b>"+h),v()}function p(l,h,c){const f=JSON.stringify(h);A("<b>client\u8BF7\u6C42\uFF1A</b>"),H(f),v(),a.request(l,h,c)}function S(l){switch(l.op){case"log.list":ht(l.data);break;case"history":ot(l.data);break;case"html":k(l.data);break;case"table":m(l.data);case"empty":break;default:L(l)}}function st(l){let h=t.value;if(h!==""){if(t.value="",h.startsWith("!")){const g=parseInt(h.substring(1))-1;console.log("index:",g),isNaN(g)||(h=o.getHistory(g),h=o.getHistory(g))}let c=h.split(/\s+/),f=c.length;const w=c[0];if(w==="help"){const g={command:w+" "+u};p("console.command",g,S),o.add(h)}else if(f>=2&&(w==="sub"||w==="unsub")){const g={topic:c[1]},E="console."+w;p(E,g,S),o.add(h)}else if(f>=2&&w==="auth")e=c[1],i=!0,l.target.type="password",A(h+"<br/> <h3>\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A</h3><br/>"),o.add(h);else if(i&&f>=1)i=!1,l.target.type="text",b.login(e,w,n.autoLoginLimit);else{const g={command:c.join(" ")};p("console.command",g,S),o.add(h)}}else A("")}function ot(l){q(Nt).mount(H(""))}function rt(l){const h=t.value;if(h.length>0){const c={head:h};a.request("console.hint",c,f=>{const w=f.names,g=f.notes,E=w.length;if(E>0&&(t.value=lt(w),E>1)){const T=new Array(E);for(let $=0;$<E;$++)T[$]=`<tr> <td>${$+1}</td> <td>${w[$]}</td> <td>${g[$]}</td> </tr>`;const ct="<table> <tr> <th></th> <th>Name</th> <th>Note</th> </tr>"+T.join("")+"</table>";A(ct),v()}})}}function at(l){const h=l.key=="ArrowUp"?-1:1,c=o.move(h);(c!=""||h==1)&&(t.value=c,setTimeout(()=>{let f=c.length;l.target.setSelectionRange(f,f),l.target.focus()},0))}function lt(l){if(l.length<2)return l.join();let h=l[0];for(let c=1;c<l.length;c++)for(let f=h.length;f>0&&h!==l[c].substring(0,f);f--)h=h.substring(0,f-1);return h}function ht(l){const h=l.logFiles,c=h.length,f=new Array(c);let w=0;for(let E=0;E<c;E++){const T=h[E];w+=T.size;let X=W(T.size);f[E]=`<tr> <td>${E+1}</td> <td>${X}</td> <td> <div class="tips"><a href="${u}/${T.path}">${T.path}</a> <span class="tips_text">${T.sample}</span>
                                <input type="button" class="copy_button" onclick="copyToClipboard('${T.path}')" value="\u590D\u5236"/>
                                </div></td> <td>${T.mod_time}</td> </tr>`}let g="<b>\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\uFF1A</b> <br> count:&nbsp;"+c+"<br>total:&nbsp;&nbsp;"+W(w)+"<br>";g+="<table> <tr> <th></th> <th>Size</th> <th>Name</th> <th>Modified Time</th> </tr>"+f.join("")+"</table>",A(g),v()}function W(l){return l<1024?l+"B":l<1048576?(l/1024).toFixed(1)+"K":(l/1048576).toFixed(1)+"M"}return(l,h)=>(R(),N(J,null,[Ft,D("div",Pt,[St(D("input",{id:"inputBox","onUpdate:modelValue":h[0]||(h[0]=c=>xt(t)?t.value=c:t=c),placeholder:"Tab\u8865\u5168\u547D\u4EE4, Enter\u6267\u884C\u547D\u4EE4",onKeydown:[F(P(st,["prevent"]),["enter"]),F(P(rt,["prevent"]),["tab"]),F(P(at,["prevent"]),["up","down"])]},null,40,Gt),[[Tt,K(t)]])])],64))}});q(Kt).use(_t()).mount("#app");
