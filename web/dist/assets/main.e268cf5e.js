var at=Object.defineProperty;var lt=(i,t,e)=>t in i?at(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var r=(i,t,e)=>(lt(i,typeof t!="symbol"?t+"":t,e),e);import{h as Q,s as ht,d as ct,u as ut,a as G,o as dt,b as $,c as H,e as F,t as L,f as D,g as c,F as R,r as tt,i as v,E as ft,j as bt,k as pt,l as X,n as yt,m as gt,w as mt,v as wt,p as kt,q,x as z,y as U,z as _t}from"./vendor.cc0e2ef2.js";const Et=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}};Et();class x{static blockCopy(t,e,n,s,o){for(let a=0;a<o;a++)n[s++]=t[e++]}}var et=(i=>(i[i.Begin=0]="Begin",i[i.Current=1]="Current",i[i.End=2]="End",i))(et||{});const P=class{constructor(t){r(this,"initialIndex",0);r(this,"dirtyBytes",0);r(this,"position",0);r(this,"length",0);r(this,"capacity",0);r(this,"buffer");if(t<0)throw new Error(`capacity=${t}`);this.capacity=t,this.buffer=new Uint8Array(t)}setCapacity(t){if(t!=this.capacity&&t!=this.buffer.length){let e;if(t!=0){e=new Uint8Array(t);for(let n=0;n<this.length;n++)e[n]=this.buffer[n];this.buffer=e}this.dirtyBytes=0,this.capacity=t}}getCapacity(){return this.capacity-this.initialIndex}setPosition(t){if(t<0)throw new Error(`position=${t}`);this.position=this.initialIndex+t}getPosition(){return this.position-this.initialIndex}setLength(t){if(t>this.capacity)throw new Error("length can not be greater than capacity");if(t<0||t+this.initialIndex>P.maxCapacity)throw new Error("out of range");let e=t+this.initialIndex;e>this.length?this.expand(e):e<this.length&&(this.dirtyBytes+=this.length-e),this.length=e,this.position>this.length&&(this.position=this.length)}getLength(){return this.length-this.initialIndex}expand(t){if(t>this.capacity){let e=t;e<32?e=32:e<this.capacity<<1&&(e=this.capacity<<1),this.setCapacity(e)}else if(this.dirtyBytes>0){for(let e=0;e<this.dirtyBytes;e++){let n=e+this.length;this.buffer[n]=0}this.dirtyBytes=0}}readByte(){return this.position>=this.length?-1:this.buffer[this.position++]}read(t,e,n){if(e<0||n<0)throw new Error(`offset=${e}, count=${n}`);if(this.buffer.length-e<n)throw new Error("the size of buffer is less than offset + count");return this.position>=this.length||n==0?0:(this.position>=this.length-n&&(n=this.length-this.position),x.blockCopy(this.buffer,this.position,t,e,n),this.position+=n,n)}write(t,e,n){if(e<0||n<0)throw new Error(`offset=${e}, count=${n}`);if(t.byteLength-e<n)throw new Error("the size of the buffer is less than offset + count");this.position>this.length-n&&this.expand(this.position+n),x.blockCopy(t,e,this.buffer,this.position,n),this.position+=n,this.position>=this.length&&(this.length=this.position)}seek(t,e){if(t>P.maxCapacity)throw new Error("offset is out of range");let n;switch(e){case 0:if(t<0)throw new Error("attempted to seek before start of OctetsSteam");n=this.initialIndex;break;case 1:n=this.position;break;case 2:n=this.length;break;default:throw new Error("invalid SeekOrigin")}if(n+=t,n<this.initialIndex)throw new Error("attempted to seek before start of OctetsStream");return this.position=n,this.position}tidy(){const t=this.length-this.position;x.blockCopy(this.buffer,this.position,this.buffer,0,t),this.setPosition(0),this.setLength(t)}toString(){return`dirtyBytes=${this.dirtyBytes}, position=${this.position}, length=${this.length}, capacity=${this.capacity}, buffer=${this.buffer}`}};let Y=P;r(Y,"maxCapacity",2147483647);class A{constructor(t,e){r(this,"type");r(this,"body");this.type=t,this.body=e}static encode(t,e){const n=e?e.length:0,s=4,o=new Uint8Array(s+n);let a=0;return o[a++]=t&255,o[a++]=n>>16&255,o[a++]=n>>8&255,o[a++]=n&255,e&&x.blockCopy(e,0,o,a,n),o}static decode(t){const e=[];for(;t.getLength()-t.getPosition()>=4;){const s=t.readByte(),o=t.readByte()<<16|t.readByte()<<8|t.readByte()>>>0;if(o<0)throw new Error(`type=${s}, length = ${o}, stream=${t.toString()}`);if(t.getLength()<o){t.seek(-4,et.Current);break}const a=new Uint8Array(o);o>0&&t.read(a,0,o);let u=new A(s,a);e.push(u)}return t.tidy(),e}}var T=(i=>(i[i.Handshake=1]="Handshake",i[i.HandshakeAck=2]="HandshakeAck",i[i.Heartbeat=3]="Heartbeat",i[i.Data=4]="Data",i[i.Kick=5]="Kick",i))(T||{});function V(i){const t=new ArrayBuffer(i.length*3),e=new Uint8Array(t);let n=0;for(let o=0;o<i.length;o++){const a=i.charCodeAt(o);let u;a<=127?u=[a]:a<=2047?u=[192|a>>6,128|a&63]:u=[224|a>>12,128|(a&4032)>>6,128|a&63];for(let d=0;d<u.length;d++)e[n]=u[d],++n}const s=new Uint8Array(n);return x.blockCopy(e,0,s,0,n),s}function O(i){const t=new Uint8Array(i),e=[];let n=0,s=0;const o=t.length;for(;n<o;)t[n]<128?(s=t[n],n+=1):t[n]<224?(s=((t[n]&63)<<6)+(t[n+1]&63),n+=2):(s=((t[n]&15)<<12)+((t[n+1]&63)<<6)+(t[n+2]&63),n+=3),e.push(s);return St(e)}function St(i){const e=[];for(let n=0;n<i.length;n+=32768)e.push(String.fromCharCode.apply(null,i.slice(n,n+32768)));return e.join("")}var S=(i=>(i[i.Request=0]="Request",i[i.Notify=1]="Notify",i[i.Response=2]="Response",i[i.Push=3]="Push",i[i.Count=4]="Count",i))(S||{});const f=class{constructor(t,e,n,s,o){r(this,"id");r(this,"type");r(this,"compressRoute");r(this,"route");r(this,"body");this.id=t,this.type=e,this.compressRoute=n,this.route=s,this.body=o}static encode(t,e,n,s,o){const a=f.hasId(e)?f.calculateMsgIdBytes(t):0;let u=f.MSG_FLAG_BYTES+a;if(f.hasRoute(e)){if(n){if(typeof s!="number")throw new Error("error flag for number route!");u+=f.MSG_ROUTE_CODE_BYTES}else if(u+=f.MSG_ROUTE_LEN_BYTES,s){if(s=V(s),s.length>255)throw new Error("route maxlength is overflow");u+=s.length}}o&&(u+=o.length);const d=new Uint8Array(u);let p=0;return p=f.encodeMsgFlag(e,n,d,p),f.hasId(e)&&(p=f.encodeMsgId(t,d,p)),f.hasRoute(e)&&(p=f.encodeMsgRoute(n,s,d,p)),o!=null&&(p=f.encodeMsgBody(o,d,p)),d}static decode(t){const e=new Uint8Array(t),n=e.length||e.byteLength;let s=0,o=0,a="";const u=e[s++],d=u&f.MSG_COMPRESS_ROUTE_MASK,p=u>>1&f.MSG_TYPE_MASK;if(f.hasId(p)){let g=e[s],k=0;do g=e[s],o=o+(g&127)*Math.pow(2,7*k),s++,k++;while(g>=128)}if(f.hasRoute(p))if(d!=0)a=(e[s++]<<8|e[s++]).toString();else{const g=e[s++];if(g>0){let k=new Uint8Array(g);x.blockCopy(e,s,k,0,g),a=O(k)}else a="";s+=g}const m=n-s,y=new Uint8Array(m);return x.blockCopy(e,s,y,0,m),new f(o,p,d,a,y)}static calculateMsgIdBytes(t){let e=0;do e+=1,t>>=7;while(t>0);return e}static encodeMsgFlag(t,e,n,s){if(!f.isValid(t))throw new Error("unknown message type: "+t);return n[s]=t<<1|(e?1:0),s+f.MSG_FLAG_BYTES}static encodeMsgId(t,e,n){do{let s=t%128;const o=Math.floor(t/128);o!==0&&(s=s+128),e[n++]=s,t=o}while(t!==0);return n}static encodeMsgRoute(t,e,n,s){if(t){if(e>f.MSG_ROUTE_CODE_MAX)throw new Error("route number is overflow");n[s++]=e>>8&255,n[s++]=e&255}else e?(n[s++]=e.length&255,x.blockCopy(e,0,n,s,e.length),s+=e.length):n[s++]=0;return s}static encodeMsgBody(t,e,n){return x.blockCopy(t,0,e,n,t.length),n+t.length}static hasId(t){return t===S.Request||t===S.Response}static hasRoute(t){return t===S.Request||t===S.Notify||t===S.Push}static isValid(t){return t>=S.Request&&t<S.Count}};let E=f;r(E,"MSG_FLAG_BYTES",1),r(E,"MSG_ROUTE_CODE_BYTES",2),r(E,"MSG_ID_MAX_BYTES",5),r(E,"MSG_ROUTE_LEN_BYTES",1),r(E,"MSG_ROUTE_CODE_MAX",65535),r(E,"MSG_COMPRESS_ROUTE_MASK",1),r(E,"MSG_TYPE_MASK",7);class Tt{constructor(){r(this,"handleHeartBeat",t=>{!this.heartbeatInterval||(this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),!this.heartbeatId&&(this.heartbeatId=setTimeout(()=>{this.heartbeatId=null;const e=A.encode(T.Heartbeat);this.send(e),this.nextHeartbeatTimeout=Date.now()+this.heartbeatTimeout,this.heartbeatTimeoutId=setTimeout(this.heartbeatTimeoutCallback,this.heartbeatTimeout)},this.heartbeatInterval)))});r(this,"handleHandshake",t=>{let e=JSON.parse(O(t));const n=501;if(e.code===n){this.emit("error","client version not fullfill");return}const s=200;if(e.code!==s){this.emit("error","handshake fail");return}this.handshakeInit(e);const o=A.encode(T.HandshakeAck);this.send(o)});r(this,"handleData",t=>{let e=t;this.decode&&(e=this.decode(e)),this.processMessage(e)});r(this,"handleKick",t=>{t=JSON.parse(O(t)),this.emit("onKick",t)});r(this,"socket",null);r(this,"buffer",new Y(8));r(this,"useCrypto",!1);r(this,"encode");r(this,"decode");r(this,"requestIdGenerator",0);r(this,"reconnectUrl","");r(this,"reconnect",!1);r(this,"reconnectTimer");r(this,"reconnectAttempts",0);r(this,"reconnectionDelay",5e3);r(this,"handshakeBuffer",{sys:{type:"js-websocket",version:"0.0.1",rsa:{}},user:{}});r(this,"pushHandlers",new Map);r(this,"handlers",new Map);r(this,"routeMap",new Map);r(this,"callbacks",new Map);r(this,"abbrs",{});r(this,"dict",{});r(this,"heartbeatInterval",0);r(this,"heartbeatTimeout",0);r(this,"nextHeartbeatTimeout",0);r(this,"heartbeatTimeoutId");r(this,"heartbeatId");r(this,"handshakeCallback")}on(t,e){this.pushHandlers[t]=e}emit(t,e=""){const n=this.pushHandlers[t];n!=null&&n(e)}processPackages(t){for(let e=0;e<t.length;e++){const n=t[e],s=this.handlers[n.type];s!=null&&s(n.body)}}defaultDecode(t){const e=E.decode(t);if(!(e.id>0&&(e.route=this.routeMap[e.id],this.routeMap.delete(e.id),!e.route)))return e.body=this.decompose(e),e}decompose(t){let e=t.route;if(t.compressRoute){if(!this.abbrs[e])return{};e=t.route=this.abbrs[e]}return JSON.parse(O(t.body))}reset(){this.reconnect=!1,this.reconnectionDelay=1e3*5,this.reconnectAttempts=0,clearTimeout(this.reconnectTimer)}initData(t){if(!(!t||!t.sys)&&(this.dict=t.sys.dict,this.dict)){this.abbrs={};for(const e in this.dict)this.abbrs[this.dict[e]]=e}}handshakeInit(t){t.sys&&t.sys.heartbeat?(this.heartbeatInterval=t.sys.heartbeat*1e3,this.heartbeatTimeout=this.heartbeatInterval*2):(this.heartbeatInterval=0,this.heartbeatTimeout=0),this.initData(t),typeof this.handshakeCallback=="function"&&this.handshakeCallback(t.user)}processMessage(t){if(t.id){const e=this.callbacks[t.id];this.callbacks.delete(t.id),typeof e=="function"&&e(t.body)}else{const e=this.pushHandlers[t.route];typeof e!="undefined"?e(t.body):console.log(`cannot find handler for route=${t.route}, msg=`,t)}}heartbeatTimeoutCallback(){const t=this.nextHeartbeatTimeout-Date.now();t>100?this.heartbeatTimeoutId=setTimeout(this.heartbeatTimeoutCallback,t):(console.error("server heartbeat timeout"),this.emit("heartbeat timeout"),this.disconnect())}send(t){this.socket!=null?this.socket.send(t.buffer):console.log("socket = null")}sendMessage(t,e,n){let s=n;this.encode&&(s=this.encode(t,e,n));const o=A.encode(T.Data,s);this.send(o)}connectInner(t,e,n){console.log("connect to: "+e),t=t||{};const s=10,o=t.maxReconnectAttempts||s;this.reconnectUrl=e;const a=y=>{this.reconnect&&this.emit("reconnect"),this.reset();const I=A.encode(T.Handshake,V(JSON.stringify(this.handshakeBuffer)));this.send(I),n!=null&&n()},u=y=>{let I=new Uint8Array(y.data),g=this.buffer;g.write(I,0,I.length),g.setPosition(0),this.processPackages(A.decode(g)),this.heartbeatTimeout&&(this.nextHeartbeatTimeout=Date.now()+this.heartbeatTimeout)},d=y=>{this.emit("io-error",y),console.error("socket error: ",y)},p=y=>{this.emit("close",y),this.emit("disconnect",y),console.log("socket close: ",y),t.reconnect&&this.reconnectAttempts<o&&(this.reconnect=!0,this.reconnectAttempts++,this.reconnectTimer=setTimeout(()=>{this.connectInner(t,this.reconnectUrl,n)},this.reconnectionDelay),this.reconnectionDelay*=2)};let m=new WebSocket(e);m.binaryType="arraybuffer",m.onopen=a,m.onmessage=u,m.onerror=d,m.onclose=p,this.socket=m}connect(t,e){this.handshakeCallback=t.handshakeCallback,this.encode=t.encode||this.defaultEncode,this.decode=t.decode||this.defaultDecode,this.handshakeBuffer.user=t.user,this.handlers[T.Heartbeat]=this.handleHeartBeat,this.handlers[T.Handshake]=this.handleHandshake,this.handlers[T.Data]=this.handleData,this.handlers[T.Kick]=this.handleKick,this.connectInner(t,t.url,e)}defaultEncode(t,e,n){const s=t!=0?S.Request:S.Notify;n=V(JSON.stringify(n));let o=!1;return this.dict&&this.dict[e]&&(e=this.dict[e],o=!0),E.encode(t,s,o,e,n)}disconnect(){this.socket!=null&&(this.socket.close(),console.log("disconnect"),this.socket=null),this.heartbeatId&&(clearTimeout(this.heartbeatId),this.heartbeatId=null),this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null)}request(t,e,n){let s=++this.requestIdGenerator;this.sendMessage(s,t,e),this.callbacks[s]=n,this.routeMap[s]=t}notify(t,e){e=e||{},this.sendMessage(0,t,e)}}let j=null;function nt(){return j==null&&(j=document.getElementById("mainPanel")),j}function K(){const i=nt();if(i){const t=i.scrollHeight-i.clientHeight-1;i.scrollTop<t&&(i.scrollTop=t)}}function B(i){const t=document.createElement("div");t.innerHTML=i;const e=nt();return e&&(e.appendChild(t),K()),t}function N(){B("<br>")}function M(i){B("["+Q(new Date).format("HH:mm:ss.S")+"] "+i)}class xt{constructor(){r(this,"host");r(this,"directory");r(this,"websocketPath");r(this,"autoLoginLimit");r(this,"body");if(document.title!="{{.Data}}"){let t=JSON.parse(document.title);this.host=window.location.host,this.directory=t.directory,this.autoLoginLimit=t.autoLoginLimit,this.websocketPath=t.websocketPath,document.title=t.title,this.body=t.body}else this.host="localhost:8888",this.directory="ws",this.autoLoginLimit=864e5,this.websocketPath="",this.body="<h2>fake body</h2>"}getRootUrl(){let t=`${document.location.protocol}//${this.host}/${this.directory}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t}getWebsocketUrl(){const e=document.location.protocol==="https:"?"wss:":"ws:";return this.directory!=""?`${e}//${this.host}/${this.directory}/${this.websocketPath}`:`${e}//${this.host}/${this.websocketPath}`}toString(){return`host=${this.host}, directory=${this.directory}, websocketPath=${this.websocketPath}, autoLoginLimit=${this.autoLoginLimit}, body=${this.body}`}}class It{constructor(t){r(this,"sendLogin");r(this,"key","autoLoginUser");this.sendLogin=t}login(t,e,n){this.doLogin(t,e),this.save(t,e,n)}tryAutoLogin(){const t=localStorage.getItem(this.key);if(t){const e=JSON.parse(t);e&&new Date().getTime()<e.expireTime&&this.doLogin(e.username,e.password)}}doLogin(t,e){const n="hey pet!",s=ht.exports.sha256.hmac(n,e);this.sendLogin("auth",t,s)}save(t,e,n){const s={username:t,password:e,expireTime:new Date().getTime()+n},o=JSON.stringify(s);localStorage.setItem(this.key,o)}}const it=ct({id:"historyStore",state:()=>ut("this.is.history.store",{currentIndex:0,list:[]},{serializer:{read:i=>{if(i){let t=JSON.parse(i);if(t)return{list:t,currentIndex:t.length}}},write:i=>JSON.stringify(i.list.slice(-100))}}),getters:{histories:i=>i.list,count:i=>i.list.length},actions:{add(i){if(i!=null&&i!=""){const t=this.list,e=t.length;e==0||t[e-1]!==i?this.currentIndex=t.push(i):this.currentIndex=t.length}},getHistory(i){return i>=0&&i<this.list.length?this.list[i]:""},move(i){if(i!=0){let t=this.currentIndex+i;if(t>=0&&t<this.list.length)return this.currentIndex=t,this.list[t]}return""}}}),Ct=c("b",null,"\u5386\u53F2\u547D\u4EE4\u5217\u8868\uFF1A",-1),Lt=F(),At=c("br",null,null,-1),Bt={id:"history-with-index"},Dt=c("br",null,null,-1),$t=G({setup(i){const t=it(),e=t.histories.map(s=>s),n=t.count;return dt(()=>{K()}),(s,o)=>($(),H(R,null,[Ct,Lt,At,F(" count: \xA0 "+L(D(n))+" ",1),c("ol",Bt,[($(!0),H(R,null,tt(D(e),a=>($(),H("li",{key:a},L(a),1))),128))]),Dt],64))}});function Ht(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Object]"&&!bt(i)}function Mt(i){let t=JSON.parse(i);if(t[0]===void 0)t=[t];else for(let n=0;n<t.length;n++){let s={" ":n+1};for(const[o,a]of Object.entries(t[n]))s[o]=a;t[n]=s}return t}function vt({column:i,$index:t}){let e=" ";switch(i.order){case"ascending":e="\u2191";break;case"descending":e="\u2193";break}return v("div",null,[i.label,e])}var Rt=G({props:{tableData:{type:String}},setup(i){let t=Mt(i.tableData);return()=>{let e;return v("div",null,[v(pt,{data:t,tableLayout:"auto"},Ht(e=Object.keys(t[0]).map(n=>v(ft,{prop:n,label:n,sortable:!0,renderHeader:vt},null)))?e:{default:()=>[e]}),v("br",null,null)])}},mounted(){setTimeout(()=>{K()})}});function Nt(i){if(i.length<2)return i.join();let t=i[0];for(let e=1;e<i.length;e++)for(let n=t.length;n>0&&t!==i[e].substring(0,n);n--)t=t.substring(0,n-1);return t}function Z(i){return i<1024?i+"B":i<1048576?(i/1024).toFixed(1)+"K":(i/1048576).toFixed(1)+"M"}const Ut=c("b",null,"\u65E5\u5FD7\u6587\u4EF6\u5217\u8868\uFF1A",-1),Ot=c("br",null,null,-1),Ft=c("br",null,null,-1),Pt=c("br",null,null,-1),Gt=c("br",null,null,-1),Kt=c("tr",null,[c("th"),c("th",null,"Size"),c("th",null,"Name"),c("th",null,"Modified Time")],-1),Jt=["innerHTML"],qt=c("br",null,null,-1),zt=G({props:{logFiles:null,rootUrl:null},setup(i){const t=i,e=t.logFiles,n=X(()=>e.length),s=X(()=>Z(e.map(a=>a.size).reduce((a,u)=>a+u)));function o(a){return`<a href="${t.rootUrl}/${a.path}">${a.path}</a>
          <span class="tips_text">${a.sample}</span>
          <input type="button" class="copy_button" onclick="copyToClipboard('${a.path}')" value="\u590D\u5236"/>`}return yt(()=>K()),(a,u)=>($(),H(R,null,[Ut,Ot,F(" count: \xA0 "+L(D(n))+" ",1),Ft,F(" total: \xA0 "+L(D(s))+" ",1),Pt,Gt,c("table",null,[Kt,c("tbody",null,[($(!0),H(R,null,tt(D(e),(d,p)=>($(),H("tr",{key:d.path},[c("td",null,L(p+1),1),c("td",null,L(D(Z)(d.size)),1),c("td",null,[c("div",{innerHTML:o(d),class:"tips"},null,8,Jt)]),c("td",null,L(d.mod_time),1)]))),128))])]),qt],64))}});const jt=c("div",{id:"mainPanel"},null,-1),Yt={id:"inputBoxDiv"},Vt=["onKeydown"],Wt=G({setup(i){let t=gt(""),e="",n=!1,s=new xt;const o=it();let a=new Tt,u=s.getRootUrl();window.sendCommand=k;let d=new It((l,...h)=>{k(l,...h)});a.connect({url:s.getWebsocketUrl()},()=>{console.log("websocket connected"),B(s.body),N(),d.tryAutoLogin()});const p=new Date;a.on("disconnect",()=>{const l=Q.duration(new Date().getTime()-p.getTime(),"milliseconds").humanize();M(`<b> disconnected from server after ${l} </b>`)}),a.on("console.html",m),a.on("console.default",I),window.onload=()=>{const l=document.getElementById("inputBox");!l||(l.focus(),document.onkeydown=function(h){if(h.key==="Enter"&&document.activeElement!==l&&l)return l.focus(),!1})};function m(l){M("<b>server\u54CD\u5E94\uFF1A</b>"+l),N()}function y(l){U(Rt,{tableData:l}).mount(B(""))}function I(l){const h=JSON.stringify(l);M("<b>server\u54CD\u5E94\uFF1A</b>"+h),N()}function g(l,h,b){const w=JSON.stringify(h);M("<b>client\u8BF7\u6C42\uFF1A</b>"),B(w),N(),a.request(l,h,b)}function k(l,...h){let b={command:l};h.length>0&&(b.command=l+" "+h.join(" ")),g("console.command",b,W)}function W(l){switch(l.op){case"log.list":U(zt,{logFiles:l.data.logFiles,rootUrl:u}).mount(B(""));break;case"history":U($t).mount(B(""));break;case"html":m(l.data);break;case"table":y(l.data);break;case"empty":break;default:I(l)}}function st(l){let h=t.value;if(h!==""){if(t.value="",h.startsWith("!")){const C=parseInt(h.substring(1))-1;isNaN(C)||(h=o.getHistory(C),h=o.getHistory(C))}let b=h.split(/\s+/),w=b.length;const _=b[0];if(_==="help")k(_,u),o.add(h);else if(w>=2&&(_==="sub"||_==="unsub")){const C={topic:b[1]},J="console."+_;g(J,C,W),o.add(h)}else w>=2&&_==="auth"?(e=b[1],n=!0,l.target.type="password",M(h+"<br/> <h3>\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A</h3><br/>"),o.add(h)):n&&w>=1?(n=!1,l.target.type="text",d.login(e,_,s.autoLoginLimit)):(k(b.join(" ")),o.add(h))}else M("")}function ot(l){const h=t.value;if(h.length>0){const b={head:h};a.request("console.hint",b,w=>{const _=w.length;if(_>0){const C=w.map(J=>J.Name);t.value=Nt(C),_>1&&y(JSON.stringify(w))}})}}function rt(l){const h=l.key=="ArrowUp"?-1:1,b=o.move(h);(b!=""||h==1)&&(t.value=b,setTimeout(()=>{let w=b.length;l.target.setSelectionRange(w,w),l.target.focus()}))}return(l,h)=>($(),H(R,null,[jt,c("div",Yt,[mt(c("input",{id:"inputBox","onUpdate:modelValue":h[0]||(h[0]=b=>kt(t)?t.value=b:t=b),placeholder:"Tab\u8865\u5168\u547D\u4EE4, Enter\u6267\u884C\u547D\u4EE4",onKeydown:[q(z(st,["prevent"]),["enter"]),q(z(ot,["prevent"]),["tab"]),q(z(rt,["prevent"]),["up","down"])]},null,40,Vt),[[wt,D(t)]])])],64))}});U(Wt).use(_t()).mount("#app");
